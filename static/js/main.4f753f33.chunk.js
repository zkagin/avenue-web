(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){e.exports=a(22)},18:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(11),s=a.n(i),o=(a(18),a(1)),l=a(2),h=a(5),u=a(4),c=a(3),v=a(6),d=(a(8),function e(t,a){Object(o.a)(this,e),this.x=t,this.y=a});var m=function(e){return n.a.createElement("div",{className:"Square"+(e.selected?" selected":"")+(e.answer?" answer":""),style:{width:e.dimension-.1+"rem",height:e.dimension-.1+"rem",lineHeight:e.dimension+"rem",fontSize:6*e.dimension,backgroundColor:(t=e.value,"rgb("+(200-15*t)+","+(200-15*t)+","+(270-15*t)+")")}},e.isEnd?"End":e.value);var t},p=function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=[],t=30/this.props.size,a=1;a<=this.props.size;a++)for(var r=1;r<=this.props.size;r++){var i=n.a.createElement(m,{key:r+","+a,value:this.props.gameState[a-1][r-1],dimension:t,isEnd:r===this.props.size&&a===this.props.size}),s=!0,o=!1,l=void 0;try{for(var h,u=this.props.history[Symbol.iterator]();!(s=(h=u.next()).done);s=!0){var c=h.value;c.x===r&&c.y===a&&(i=n.a.cloneElement(i,{selected:!0}))}}catch(w){o=!0,l=w}finally{try{s||null==u.return||u.return()}finally{if(o)throw l}}if(null!=this.props.optimalPath){var v=!0,d=!1,p=void 0;try{for(var y,f=this.props.optimalPath[Symbol.iterator]();!(v=(y=f.next()).done);v=!0){var b=y.value;b.x===r&&b.y===a&&(i=n.a.cloneElement(i,{answer:!0}))}}catch(w){d=!0,p=w}finally{try{v||null==f.return||f.return()}finally{if(d)throw p}}}e.push(i)}return n.a.createElement("div",{className:"Grid",style:{width:"30rem",height:"30rem"}},e)}}]),t}(n.a.Component),y=function e(t,a,r){Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.value=void 0,this.distanceToNode=void 0,this.previousNode=void 0,this.x=t,this.y=a,this.value=r,this.distanceToNode=Number.MAX_SAFE_INTEGER,this.previousNode=null};function f(e,t){var a=[],r=e.x.valueOf(),n=e.y.valueOf();return e.y>0&&a.push(t[n-1][r]),e.x>0&&a.push(t[n][r-1]),e.y<t.length-1&&a.push(t[n+1][r]),e.x<t.length-1&&a.push(t[n][r+1]),a}var b=function(e){for(var t=[],a=[],r=0;r<e.length;r++){t[r]=[];for(var n=0;n<e.length;n++){var i=e[r][n],s=new y(n,r,i);t[r].push(s),a.push(s)}}var o=a.shift();for(o.distanceToNode=0;o.x!==e.length-1||o.y!==e.length-1;){var l=!0,h=!1,u=void 0;try{for(var c,v=f(o,t)[Symbol.iterator]();!(l=(c=v.next()).done);l=!0){var m=c.value;if(a.includes(m)){var p=m.distanceToNode,b=o.distanceToNode+m.value;b<p&&(m.distanceToNode=b,m.previousNode=o)}}}catch(g){h=!0,u=g}finally{try{l||null==v.return||v.return()}finally{if(h)throw u}}a.sort(function(e,t){return e.distanceToNode-t.distanceToNode}),o=a.shift()}for(var w=[],S=0;w.push(new d(o.x+1,o.y+1)),S+=o.value,null!=o.previousNode;)o=o.previousNode;return[w,S]},w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={currentPath:[new d(1,1)],gameState:a.newGameState(a.props.level),optimalPath:null},a.handleKeyDown=a.handleKeyDown.bind(Object(c.a)(a)),a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode;if(this.isGameOver()&&32===t)this.setState({currentPath:[new d(1,1)],gameState:this.newGameState(this.props.level),optimalPath:null});else if(this.isGameOver()||t>40||t<37)return;var a=this.state.currentPath.slice(-1)[0],r=this.state.currentPath.slice(-2,-1)[0],n=a.x,i=a.y;switch(t){case 37:n>1&&n--;break;case 38:i>1&&i--;break;case 39:n<this.props.level&&n++;break;case 40:i<this.props.level&&i++}if(n===a.x&&i===a.y);else if(r&&n===r.x&&i===r.y){var s=this.state.currentPath.slice();s.pop(),this.setState({currentPath:s,gameState:this.state.gameState,optimalPath:this.state.optimalPath})}else if(this.isAlreadyInPath(n,i));else{var o=this.state.currentPath.slice();o.push(new d(n,i)),this.setState({currentPath:o,gameState:this.state.gameState,optimalPath:this.state.optimalPath})}this.handleGameOver()}},{key:"isGameOver",value:function(){var e=this.state.currentPath.slice(-1)[0];return e.x===this.props.level&&e.y===this.props.level}},{key:"handleGameOver",value:function(){if(this.isGameOver()){var e=b(this.state.gameState);this.getCurrentPathScore()===e[1]?this.props.onCompletedLevel():this.setState({currentPath:this.state.currentPath,gameState:this.state.gameState,optimalPath:e[0]})}}},{key:"isAlreadyInPath",value:function(e,t){var a=!0,r=!1,n=void 0;try{for(var i,s=this.state.currentPath[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(e===o.x&&t===o.y)return!0}}catch(l){r=!0,n=l}finally{try{a||null==s.return||s.return()}finally{if(r)throw n}}return!1}},{key:"newGameState",value:function(e){for(var t=[],a=0;a<e;a++){t[a]=[];for(var r=0;r<e;r++)t[a][r]=Math.floor(5*Math.random())+1}return t}},{key:"getCurrentPathScore",value:function(){var e=0,t=!0,a=!1,r=void 0;try{for(var n,i=this.state.currentPath[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var s=n.value;e+=this.state.gameState[s.y-1][s.x-1]}}catch(o){a=!0,r=o}finally{try{t||null==i.return||i.return()}finally{if(a)throw r}}return e}},{key:"render",value:function(){var e=this.isGameOver()?"Press Space to try again.":"Level "+this.props.level;return n.a.createElement("div",null,n.a.createElement("div",{id:"title"},e),n.a.createElement("div",{className:"Game"},n.a.createElement(p,{size:this.props.level,history:this.state.currentPath,gameState:this.state.gameState,optimalPath:this.state.optimalPath})),n.a.createElement("div",{id:"instructions"},"Get to the bottom right corner with the smallest sum of numbers.",n.a.createElement("br",null),"Use arrow keys to move."))}}]),t}(n.a.Component),S=a(9),g=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(h.a)(this,Object(u.a)(t).call(this,e));var r=e.cookies;return a.onCompletedLevel=a.onCompletedLevel.bind(Object(c.a)(a)),a.state={level:parseInt(r.get("maxLevel"))||3},a}return Object(v.a)(t,e),Object(l.a)(t,[{key:"onCompletedLevel",value:function(){this.props.cookies.set("maxLevel",this.state.level+1),this.setState({level:this.state.level+1})}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(w,{level:this.state.level,onCompletedLevel:this.onCompletedLevel,key:this.state.level}))}}]),t}(n.a.Component),P=Object(S.b)(g);s.a.render(n.a.createElement(S.a,null,n.a.createElement(P,null)),document.getElementById("root"))},8:function(e,t,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.4f753f33.chunk.js.map